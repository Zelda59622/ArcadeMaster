<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcade Master - Boutique</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Styles sp√©cifiques de la boutique (inclus ici pour la portabilit√©) */
        .shop-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-start;
            gap: 20px;
            margin-top: 20px;
        }
        .shop-card {
            flex: 0 1 250px; 
            padding: 20px;
            background-color: var(--color-background-dark);
            border-radius: 10px;
            border: 2px solid var(--color-neon-blue);
            box-shadow: 0 0 10px rgba(0, 229, 255, 0.2);
            text-align: center;
        }
        .shop-card .item-icon {
            font-size: 3em;
            display: block;
            margin-bottom: 10px;
        }
        .shop-card .price {
            font-weight: bold;
            font-size: 1.2em;
            margin: 10px 0;
            color: var(--color-neon-green);
        }
    </style>
</head>
<body>
    
    <div id="top-bar"></div>
    <div id="sidebar" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <div id="nav-links"></div>
    </div>

    <div class="main-container" id="mainContent">
        
        <h1 style="color: var(--color-neon-orange); text-align: center;">BOUTIQUE ARCADE</h1>
        <hr>
        
        <div class="centered-container" id="notConnectedMessage" style="display: none;">
            <p style="color: var(--color-text-medium); margin-bottom: 30px; font-size: 1.1em;">
                Vous devez √™tre <strong style="color: var(--color-neon-green);">connect√©</strong> pour acc√©der √† la boutique et acheter/√©quiper des skins.
            </p>
            <a href="compte.html" class="btn-primary" style="background-color: var(--color-neon-green);">
                <i class="fas fa-sign-in-alt"></i> Se connecter maintenant
            </a>
        </div>
        
        <div id="boutiqueContent" style="display: none;">
            
            <section class="items-section">
                <h2 style="color: var(--color-neon-blue); margin-bottom: 20px;">SKINS DE VAISSEAU</h2>
                
                <div class="shop-list">
                    
                    <div class="shop-card" data-item-id="vessel_base" data-owned="true" data-equipped="true">
                        <span class="item-icon" style="color: var(--color-neon-green);">üöÄ</span>
                        <h3 style="color: var(--color-neon-green);">Vaisseau Standard</h3>
                        <p class="price" style="color: var(--color-text-light);">Gratuit</p>
                        <button class="btn-primary btn-equip" style="background-color: var(--color-neon-blue);" disabled>
                            √âquip√©
                        </button>
                    </div>

                    <div class="shop-card" data-item-id="vessel_ninja" data-owned="false">
                        <span class="item-icon" style="color: var(--color-text-medium);">üåë</span>
                        <h3 style="color: var(--color-text-light);">Skin Ninja</h3>
                        <p class="price">15 000 üí∞</p>
                        <button class="btn-primary btn-buy" style="background-color: var(--color-neon-green);">
                            Acheter
                        </button>
                    </div>

                    <div class="shop-card" data-item-id="vessel_gold" data-owned="true" data-equipped="false">
                        <span class="item-icon" style="color: gold;">üèÜ</span>
                        <h3 style="color: var(--color-neon-orange);">Vaisseau Gold</h3>
                        <p class="price" style="color: var(--color-text-light);">Poss√©d√©</p>
                        <button class="btn-primary btn-equip" style="background-color: var(--color-neon-orange);">
                            √âquiper
                        </button>
                    </div>

                </div>
            </section>
            
            <hr style="margin: 40px 0;">

            <section class="items-section">
                <h2 style="color: var(--color-neon-blue); margin-bottom: 20px;">SKINS DE MONSTRE</h2>
                
                <div class="shop-list">
                    
                    <div class="shop-card" data-item-id="monster_squid" data-owned="false">
                        <span class="item-icon" style="color: purple;">ü¶ë</span>
                        <h3 style="color: var(--color-neon-purple);">Squid Alien</h3>
                        <p class="price">25 000 üí∞</p>
                        <button class="btn-primary btn-buy" style="background-color: var(--color-neon-green);">
                            Acheter
                        </button>
                    </div>
                    
                    <div class="shop-card" data-item-id="monster_ghost" data-owned="false">
                        <span class="item-icon" style="color: white;">üëª</span>
                        <h3 style="color: var(--color-neon-red);">Fant√¥me</h3>
                        <p class="price">50 000 üí∞</p>
                        <button class="btn-primary btn-buy" style="background-color: var(--color-neon-green);">
                            Acheter
                        </button>
                    </div>
                </div>
            </section>

            <hr style="margin: 40px 0;">

            <section class="items-section centered-container" style="max-width: 800px; text-align: center;">
                <h2 style="color: var(--color-neon-red); margin-bottom: 20px;">ACHAT DE PI√àCES (Argent R√©el)</h2>
                <p style="color: var(--color-text-medium); margin-bottom: 30px;">Soutenez le d√©veloppement et obtenez instantan√©ment des pi√®ces pour la boutique !</p>
                
                <div class="shop-list" style="justify-content: center;">
                    
                    <div class="shop-card" style="border-color: var(--color-neon-red); box-shadow: 0 0 15px rgba(255, 0, 0, 0.4);">
                        <span class="item-icon" style="color: var(--color-neon-orange);">üíé</span>
                        <h3 style="color: var(--color-neon-orange);">1 000 Pi√®ces</h3>
                        <p class="price" style="color: var(--color-neon-red);">4.99 ‚Ç¨</p>
                        <a href="rickroll.html" class="btn-primary" style="background-color: var(--color-neon-red);">
                            Acheter
                        </a>
                    </div>
                    
                    <div class="shop-card" style="border-color: var(--color-neon-red); box-shadow: 0 0 15px rgba(255, 0, 0, 0.4);">
                        <span class="item-icon" style="color: var(--color-neon-orange);">üëë</span>
                        <h3 style="color: var(--color-neon-orange);">2 500 Pi√®ces</h3>
                        <p class="price" style="color: var(--color-neon-red);">10.00 ‚Ç¨</p>
                        <a href="rickroll.html" class="btn-primary" style="background-color: var(--color-neon-red);">
                            Acheter
                        </a>
                    </div>
                </div>
            </section>
            </div>
    </div>
    
    <script src="base.js"></script>
    <script src="auth.js"></script>
    <script>
        // Logique pour afficher/masquer le contenu si l'utilisateur est connect√©
        document.addEventListener('DOMContentLoaded', () => {
            // Assure que getCurrentUser est charg√© via base.js
            const user = typeof getCurrentUser === 'function' ? getCurrentUser() : { id: 0 };
            const notConnected = document.getElementById('notConnectedMessage');
            const content = document.getElementById('boutiqueContent');

            if (user.id !== 0) {
                notConnected.style.display = 'none';
                content.style.display = 'block';
            } else {
                notConnected.style.display = 'block';
                content.style.display = 'none';
            }
            
            // --- LOGIQUE SIMUL√âE DES BOUTONS DE SKINS ---
            
            // Simule l'action d'acheter ou d'√©quiper un skin
            document.querySelectorAll('.btn-buy, .btn-equip').forEach(button => {
                button.addEventListener('click', (e) => {
                    const card = e.target.closest('.shop-card');
                    const itemId = card.dataset.itemId;
                    
                    if (e.target.classList.contains('btn-buy')) {
                        // Logique d'achat simul√©e (doit v√©rifier les pi√®ces dans le vrai code)
                        alert(`Achat simul√© de l'objet : ${itemId}. F√©licitations !`);
                        
                        // Simulation de la mise √† jour apr√®s l'achat
                        card.dataset.owned = 'true';
                        e.target.classList.remove('btn-buy');
                        e.target.classList.add('btn-equip');
                        e.target.textContent = '√âquiper';
                        e.target.style.backgroundColor = 'var(--color-neon-orange)';
                        card.querySelector('.price').textContent = 'Poss√©d√©';
                        card.querySelector('.price').style.color = 'var(--color-text-light)';

                    } else if (e.target.classList.contains('btn-equip')) {
                        // Logique d'√©quipement simul√©e
                        
                        // D√©s√©quiper l'ancien (logique tr√®s simplifi√©e)
                        document.querySelectorAll('.shop-card[data-equipped="true"]').forEach(equippedCard => {
                            if (equippedCard !== card) {
                                equippedCard.dataset.equipped = 'false';
                                const eqBtn = equippedCard.querySelector('.btn-equip');
                                if(eqBtn) {
                                    eqBtn.textContent = '√âquiper';
                                    eqBtn.disabled = false;
                                }
                            }
                        });

                        // √âquiper le nouveau
                        alert(`√âquipement simul√© de l'objet : ${itemId}.`);
                        card.dataset.equipped = 'true';
                        e.target.textContent = '√âquip√©';
                        e.target.disabled = true;
                    }
                });
            });
        });
    </script>
</body>
</html>
